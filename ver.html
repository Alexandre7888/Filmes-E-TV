<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Cat√°logo iTV</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { background:#111; color:#fff; font-family:sans-serif; padding:20px; margin:0 }
    h1,h2 { text-align:center; color:#e50914 }
    #busca { display:block; margin:20px auto; padding:10px; width:90%; max-width:500px; font-size:16px; border-radius:6px; border:none }
    .card { background:#222; border-radius:10px; padding:15px; margin:15px 0 }
    .card img { width:100%; max-width:300px; border-radius:8px; margin-bottom:10px }
  </style>
</head>
<body>
  <h1>üéûÔ∏è Cat√°logo iTV</h1>
  <input id="busca" type="text" placeholder="üîç Pesquisar...">
  <div id="filmes"><h2>üé¨ Filmes</h2><p>Carregando...</p></div>
  <div id="series"><h2>üì∫ S√©ries</h2></div>
  <div id="tv"><h2>üì° TV</h2></div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

    const app = initializeApp({
      apiKey: "AIzaSyC4THzGt-8NwPDmWuaqR4OTJR_6XbfbSvM",
      authDomain: "api7-5cde7.firebaseapp.com",
      databaseURL: "https://api7-5cde7-default-rtdb.firebaseio.com",
      projectId: "api7-5cde7",
      storageBucket: "api7-5cde7.appspot.com",
      messagingSenderId: "113015470459",
      appId: "1:113015470459:web:3ffd77031fb936d001a5de"
    });

    const db = getDatabase(app);
    const token = new URLSearchParams(location.search).get("token") || "PUBLICO";
    const busca = document.getElementById("busca");

    let todos = [];

    async function carregar(tipo, divId) {
      const div = document.getElementById(divId);
      div.innerHTML = `<h2>${div.querySelector('h2').textContent}</h2>`;
      const caminhos = [tipo, `conteudos/${token}/${tipo}`];

      for (const caminho of caminhos) {
        const snap = await get(ref(db, caminho));
        if (snap.exists()) {
          const dados = snap.val();
          for (const id in dados) {
            const item = dados[id];
            todos.push(item);
            const card = document.createElement("div");
            card.className = "card";
            let html = "";

            if (item.capa) html += `<img src="${item.capa}">`;
            html += `<h3>${item.titulo || "Sem t√≠tulo"}</h3>`;
            if (item.genero) html += `<p><b>G√™nero:</b> ${item.genero}</p>`;
            if (item.autor) html += `<p><b>Autor:</b> ${item.autor}</p>`;
            if (item.link) html += `<iframe src="${item.link}" allowfullscreen></iframe>`;

            card.innerHTML = html;
            div.appendChild(card);
          }
        }
      }
    }

    busca.addEventListener("input", () => {
      const termo = busca.value.toLowerCase();
      document.querySelectorAll(".card").forEach(card => {
        card.style.display = card.innerText.toLowerCase().includes(termo) ? "block" : "none";
      });
    });

    carregar("filmes", "filmes");
    carregar("series", "series");
    carregar("tv", "tv");
  </script>
</body>
</html>.js");
    }
  <
